webpackJsonp([7],{SXpl:function(e,t){},UEGM:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mtWM"),r=a.n(n),o=a("HJfm"),l={data:function(){return{roleName:"",roleTableData:[],currentPage:1,pageSize:10,total:0,pageNum:1,state:"",authorization:"",token:""}},created:function(){var e=window.localStorage;this.authorization=e.getItem("userId"),this.token=e.getItem("token")},mounted:function(){this.getRoleData()},methods:{handleClickSee:function(e){this.$router.push({name:"roleManager",params:{row:e,key:"look"}})},handleClickModify:function(e,t){this.$router.push({name:"roleManager",params:{row:e,key:"modify"}})},handleClickDel:function(e,t){var a=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r()({url:o.b+"/userPermission/deleteRoles",method:"get",headers:{Authorization:"user-"+a.authorization+"-"+a.token},params:{roleIds:e.id}}).then(function(e){e.data.msg?a.$router.push({name:"login"}):a.getRoleData()}).catch(function(e){console.log(e)}),a.$message({type:"success",message:"删除成功!"})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},handleSizeChange:function(e){},handleCurrentChange:function(e){this.pageNum=e,this.getRoleData()},getRoleData:function(){var e=this;r()({url:o.b+"/userPermission/findRoles",method:"get",headers:{Authorization:"user-"+this.authorization+"-"+this.token},params:{roleName:this.roleName,pageSize:this.pageSize,pageNum:this.pageNum-1}}).then(function(t){if(t.data.msg)e.$router.push({name:"login"});else{e.roleTableData=t.data.list,e.total=t.data.count;for(var a=0;a<t.data.list.length;a++)e.state=t.data.list[a].state,e.roleTableData[a].createTime=e.roleTableData[a].createTime.substring(0,10)}}).catch(function(e){console.log(e)})},deleterRole:function(){}}};var s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"role-box"},[a("div",{staticClass:"query"},[a("span",{staticClass:"title"},[e._v("角色名称")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.roleName,expression:"roleName"}],staticStyle:{"font-size":"18px"},attrs:{type:"text"},domProps:{value:e.roleName},on:{input:function(t){t.target.composing||(e.roleName=t.target.value)}}}),e._v(" "),a("span",{staticClass:"query-btn",on:{click:function(t){return e.getRoleData()}}},[e._v("查询")])]),e._v(" "),a("div",{staticClass:"add-role"},[a("span",{staticClass:"add-role-btn"},[a("router-link",{attrs:{tag:"span",to:{name:"roleManager",params:{key:"add"}}}},[e._v("新增角色")])],1)]),e._v(" "),a("div",{staticClass:"role-table"},[a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.roleTableData}},[a("el-table-column",{attrs:{prop:"roleName",label:"角色名称",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"标准价格（元/年）"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.standardPrice?a("span",[e._v(e._s(t.row.standardPrice))]):a("span",[e._v("——")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"续费价格（元/年）"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.renewPrice?a("span",[e._v(e._s(t.row.renewPrice))]):a("span",[e._v("——")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"webUserCount",align:"center",width:"100",label:"使用人数"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",prop:"state"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClickSee(t.row)}}},[e._v("查看")]),e._v(" "),"0"==t.row.state&&"0"==t.row.webUserCount?a("el-button",{staticStyle:{cursor:"pointer"},attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClickModify(t.row)}}},[e._v("修改")]):a("el-button",{staticStyle:{cursor:"pointer"},attrs:{type:"text",size:"small"}},[e._v("不可修改")]),e._v(" "),"0"==t.row.state&&"0"==t.row.webUserCount?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClickDel(t.row)}}},[e._v("删除")]):a("el-button",{attrs:{type:"text",size:"small"}},[e._v("不可以删除")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"paging-box"},[a("div"),e._v(" "),a("div",[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)])])])},staticRenderFns:[]};var i=a("VU/8")(l,s,!1,function(e){a("SXpl")},"data-v-675af967",null);t.default=i.exports}});
//# sourceMappingURL=7.c7c9eb43e10b69fc4a77.js.map