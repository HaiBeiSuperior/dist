{"version":3,"sources":["webpack:///src/pages/addApiUser/index.vue","webpack:///./src/pages/addApiUser/index.vue?c474","webpack:///./src/pages/addApiUser/index.vue"],"names":["addApiUser","data","selectedPermission","getPermissionses","updateSelectedPermission","allPermission","data2","defaultProps","children","label","accountType","value","accountStatus","value1","value2","modifyStatus","username","password","name","companyName","mobile","modify","modifyId","remake","authorization","token","days","created","storage","window","localStorage","this","getItem","mounted","$route","params","key","console","log","row","type","status","id","permissions","formatData","getPermissions","methods","modifyUser","_this","getCheckedNodes","axios_default","url","constant","method","headers","Authorization","then","res","msg","$router","push","$message","message","code","catch","err","addUser","_this2","length","goBack","go","_this3","newArr","_loop","obj","forEach","item","state","i","_this4","$refs","tree","temp","nodeId","singleArr","_i","ststeFlag","f1","indexOf","pages_addApiUser","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_e","directives","rawName","expression","attrs","domProps","on","input","$event","target","composing","disabled","ref","show-checkbox","node-key","default-expanded-keys","default-checked-keys","props","placeholder","model","callback","$$v","_l","click","plain","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/8.b57ceef9415de0d1a069.js","sourcesContent":["<template>\n    <div class=\"addApiUser\">\n        <div class=\"bx\">\n            <h2 v-if=\"this.$route.params.key == 'add'\">新增账号</h2>\n            <h2 v-if=\"this.$route.params.key == 'modify'\">修改账号</h2>\n            <h2 v-if=\"this.$route.params.key == 'look'\">查看信息</h2>\n            <div class=\"ul-div\">\n                <ul>\n                <li>\n                    <span>用户名</span>\n                    <input type=\"text\" v-if=\"this.$route.params.key == 'add'\" v-model=\"username\">\n                    <input type=\"text\" v-if=\"this.$route.params.key == 'modify'\" v-model=\"username\" disabled>\n                    <input type=\"text\" v-if=\"this.$route.params.key == 'look'\" v-model=\"username\" disabled>\n                </li>\n                <li>\n                    <span>密码</span>\n                    <input type=\"text\" v-model=\"password\" v-if=\"this.$route.params.key == 'add'\">\n                    <input type=\"text\" v-model=\"password\" v-if=\"this.$route.params.key == 'modify'\" disabled>\n                    <input type=\"text\" v-model=\"password\" v-if=\"this.$route.params.key == 'look'\" disabled>\n                </li>\n                <li>\n                    <span>姓名</span>\n                    <input type=\"text\" v-model=\"name\">\n                </li>\n                <li>\n                    <span>所属公司</span>\n                    <input type=\"text\" v-model=\"companyName\">\n                </li>\n                <li>\n                    <span>联系电话</span>\n                    <input type=\"text\" v-model=\"mobile\">\n                </li>\n                <li>\n                    <span>API权限</span>\n                    <i class=\"permission-specification\">\n                        <el-tree\n                            :data=\"data2\"\n                            show-checkbox\n                            node-key=\"id\"\n                            ref=\"tree\"\n                            :default-expanded-keys=\"[1,2, 3,4]\"\n                            :default-checked-keys=\"selectedPermission\"\n                            :props=\"defaultProps\">\n                        </el-tree>\n                    </i>\n                </li>\n                 <li>\n                    <span>账号状态</span>\n                    <el-select v-model=\"value2\" placeholder=\"请选择\">\n                        <el-option\n                            v-for=\"item in accountStatus\"\n                            :key=\"item.value\"\n                            :label=\"item.label\"\n                            :value=\"item.value\">\n                        </el-option>\n                    </el-select>\n                </li>\n                <li>\n                    <span>权限有效期</span>\n                    <input type=\"text\" v-model=\"days\">\n                    <i>天</i>\n                </li>\n                <li>\n                    <span>备注信息</span>\n                    <input type=\"text\" v-model=\"remake\">\n                </li>\n            </ul>\n            </div>\n            <div class=\"btns\">\n                <el-button type=\"primary\" @click=\"addUser()\" v-if=\"this.$route.params.key == 'add'\">确定</el-button>\n                <el-button type=\"primary\" @click=\"modifyUser()\" v-if=\"this.$route.params.key == 'modify'\">确定</el-button> \n                <el-button type=\"info\" plain @click=\"goBack()\">取消</el-button>\n            </div>\n        </div>\n\n    </div>\n</template>\n<script>\nimport Axios from 'axios'\nimport { javaServiceUrl } from './../../util/constant.js'\n\nexport default {\n    data(){\n        return{\n            selectedPermission:[],//选中的权限\n            getPermissionses:{},//获取到的权限\n            updateSelectedPermission:[],//要修改的权限\n            allPermission:{},\n            data2: [],\n            defaultProps: {\n            children: 'children',\n            label: 'label'\n            },\n            //账户类型\n            accountType:[{\n                value:'1',\n                label:\"国内量化基金\"\n            },{\n                value:'2',\n                label:\"海外量化基金\"\n            },{\n                value:'3',\n                label:\"国内基本面基金\"\n            },{\n                value:'4',\n                label:\"海外基本面基金\"\n            },{\n                value:\"5\",\n                label:\"其他\"\n            }],\n            accountStatus: [{\n                value: '0',\n                label: '使用中'\n            }, {\n                value: '-1',\n                label: '已停用'\n            }],\n            value1: '', //用户类型\n            value2: '',//账户状态\n            modifyStatus:\"\",//修改账户状态\n            username:'',//用户名\n            password:'',//密码\n            name:\"\",//姓名\n            companyName:'',//所属公司\n            mobile:'',//联系电话\n            modify:{},//修改账号内容\n            modifyId:\"\",//修改需要传的id\n            remake:'',//备注信息\n            authorization:\"\",//请求头\n            token:\"\",\n            days:'',//开通权限天数\n        }\n    },\n     created(){\n        var storage = window.localStorage;\n        this.authorization = storage.getItem(\"userId\");\n        this.token = storage.getItem(\"token\");\n    },\n    mounted(){\n        if(this.$route.params.key != 'add'){\n            console.log('查123',this.$route.params.row)\n            this.modify = this.$route.params.row;\n            this.password = \"******\";\n            this.name = this.modify.name;\n            this.companyName = this.modify.companyName;\n            this.mobile = this.modify.mobile;\n            this.value1 = this.modify.type;\n            //用户状态\n            this.value2 = this.modify.status;\n            if(this.modify.status == '使用中' ){\n                this.value2 = \"0\";\n            }else if(this.modify.status == '已停用'){\n                this.value2 =\" -1\";\n            }\n            this.modifyId = this.modify.id;\n            this.username = this.modify.username;\n            this.remake = this.modify.remake;\n            //权限\n            this.allPermission = this.modify.permissions;\n            this.data2 = this.formatData(this.modify.permissions);\n           this.days = this.modify.days;\n        }else{\n            this.getPermissions();\n        }\n        \n    },\n   \n    methods:{\n        modifyUser(){\n          this.getCheckedNodes();\n\n            Axios({\n               url: javaServiceUrl+'/apiPermission/insertOrUpdateApiUser',\n               method: 'post',\n               headers: {\"Authorization\":\"user-\" + this.authorization + \"-\" +this.token},     \n               data:{\n                    name:this.name,\n                    status:this.value2,\n                    type:this.value1,\n                    mobile:this.mobile,\n                    companyName:this.companyName,\n                    days:this.days,\n                    remake: this.remake,\n                    permissions:this.allPermission,\n                    id:this.modifyId,\n                }\n            })\n            .then(res=>{\n                if(res.data.msg){\n                    this.$router.push({\n                        name:'login',\n                    })\n                }else{\n                    this.$router.push({name: 'apiUser'});\n                    this.$message({\n                        type:'success',\n                        message:\"更新\"+res.data.code+'条！',\n                    })\n                }\n            })\n            .catch(err=>{\n                console.log(err)\n            })\n        },\n        //添加\n        addUser(){\n          this.getCheckedNodes();\n\n            if(this.password.length < 6 || this.password.length >20){\n                this.$message({\n                    message: '密码长度为6-20位!',\n                    type: 'warning'\n                });\n                return false;\n            }\n            Axios({\n               url:javaServiceUrl + '/apiPermission/insertOrUpdateApiUser',\n               method: 'post',\n               headers: {\"Authorization\":\"user-\" + this.authorization + \"-\" +this.token},  \n               data:{\n                    username:this.username,\n                    password:this.password,\n                    name:this.name,\n                    status:0,\n                    mobile:this.mobile,\n                    companyName:this.companyName,\n                    days:this.days,\n                    remake:this.remake,\n                    permissions:this.allPermission,\n\n                }\n            })\n            .then(res=>{\n                if(res.data.msg){\n                    this.$router.push({\n                        name:'login',\n                    })\n                }else{\n                    this.$router.push({name: 'apiUser'});\n                    this.$message({\n                        type:'success',\n                        message:\"更新\"+res.data.code+'条！',\n                    })\n                }\n            })\n            .catch(err=>{\n                console.log(err)\n            })\n        },\n        //取消\n        goBack(){\n            this.$router.go(-1);\n        },\n         //重组数据结构\n      formatData(data) {\n        let newArr = [];\n        let id = 0;\n        for(let key in data) {\n        \n            \n\t\t\tlet obj = {\n\t\t\t  id: id+=1,\n\t\t\t  label: key,\n\t\t\t  children: []\n\t\t\t}\n\t\t\tlet singleArr = data[key];\n\t\t\tsingleArr.forEach(item => {\n\t\t\t  //为了编辑页面回显选中的权限\n\t\t\t  if(item.state == \"unlock\"){\n\t\t\t\t  this.selectedPermission.push(item.id);\n\t\t\t  }\n\t\t\t  obj.children.push({\n\t\t\t\tid: item.id,\n\t\t\t\tlabel: item.name,\n\t\t\t  })\n\t\t\t  for(let i = 0; i < item.length; i++){\n\t\t\t  }\n\t\t\t});\n\t\t\tnewArr.push(obj);\n          \n        }\n        return newArr;\n      },\n           //获取所有权限\n      getPermissions(){\n          Axios({\n               url: javaServiceUrl + '/apiPermission/getPermissions',\n               method: 'get',\n               headers: {\"Authorization\":\"user-\" + this.authorization + \"-\" +this.token},     \n              \n            })\n            .then(res=>{\n                if(res.data.msg){\n                    this.$router.push({\n                        name:'login',\n                    })\n                }else{\n                  this.allPermission = res.data;\n                  this.data2 = this.formatData(res.data);\n                }\n              \n            })\n            .catch(err=>{\n                console.log(err)\n            })\n      },\n        //获取选中节点\n      getCheckedNodes() {\n        this.updateSelectedPermission = this.$refs.tree.getCheckedNodes();\n        //选中的值会写到原始数据中，传给后台\n        let temp = [];\n        let sentimentTemp = 0;\n        for(let i = 0; i < this.updateSelectedPermission.length;i++){\n          let nodeId = this.updateSelectedPermission[i].id;\n          let nodeName = this.updateSelectedPermission[i].label;\n          for(let key in this.allPermission) {\n            let singleArr = this.allPermission[key];\n            for(let i = 0; i < singleArr.length;i++) {\n                if(singleArr[i].id == nodeId){\n                    singleArr[i].state = \"unlock\";\n                    \n                    temp.push(nodeId);\n                }else{\n                let ststeFlag = false;\n                for (var f1 in temp) {\n                    if (temp[f1].indexOf(singleArr[i].id) > -1) {\n                    ststeFlag = true;\n                    }\n                }\n                if(!ststeFlag){\n                    singleArr[i].state = \"lock\";\n                \n                }\n                }\n            }\n          }\n        }\n      }\n      \n        \n    }\n}\n</script>\n<style lang=\"scss\" scoped>\n.addApiUser{\n     .permission-specification{\n            display: inline-block;\n            width: 300px;\n            height: 300px;\n            overflow:auto;\n            border: 1px solid #DCDFE6;\n            vertical-align: text-top;\n        }\n    .bx{\n        padding-top: 20px;\n        h2{\n            font-size: 20px;\n            margin: 20px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n        }\n        width: 100%;\n        height: 100%;\n        background: #fff;\n        .ul-div{\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            \n        }\n        ul{\n            li{\n                margin: 20px 30px;\n                input{\n                    width: 300px;\n                    height: 40px;\n                    border-radius: 4px;\n                    border: 1px solid #DCDFE6;\n                } \n                span{\n                    display: inline-block;\n                    width: 80px;\n                    text-align: right;\n                    margin-right: 10px;\n                }\n            }\n        }\n        .btns{\n            margin: 30px 350px;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n        }\n    }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/addApiUser/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"addApiUser\"},[_c('div',{staticClass:\"bx\"},[(this.$route.params.key == 'add')?_c('h2',[_vm._v(\"新增账号\")]):_vm._e(),_vm._v(\" \"),(this.$route.params.key == 'modify')?_c('h2',[_vm._v(\"修改账号\")]):_vm._e(),_vm._v(\" \"),(this.$route.params.key == 'look')?_c('h2',[_vm._v(\"查看信息\")]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"ul-div\"},[_c('ul',[_c('li',[_c('span',[_vm._v(\"用户名\")]),_vm._v(\" \"),(this.$route.params.key == 'add')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.username=$event.target.value}}}):_vm._e(),_vm._v(\" \"),(this.$route.params.key == 'modify')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],attrs:{\"type\":\"text\",\"disabled\":\"\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.username=$event.target.value}}}):_vm._e(),_vm._v(\" \"),(this.$route.params.key == 'look')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.username),expression:\"username\"}],attrs:{\"type\":\"text\",\"disabled\":\"\"},domProps:{\"value\":(_vm.username)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.username=$event.target.value}}}):_vm._e()]),_vm._v(\" \"),_c('li',[_c('span',[_vm._v(\"密码\")]),_vm._v(\" \"),(this.$route.params.key == 'add')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}}):_vm._e(),_vm._v(\" \"),(this.$route.params.key == 'modify')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"type\":\"text\",\"disabled\":\"\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}}):_vm._e(),_vm._v(\" \"),(this.$route.params.key == 'look')?_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"type\":\"text\",\"disabled\":\"\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}}):_vm._e()]),_vm._v(\" \"),_c('li',[_c('span',[_vm._v(\"姓名\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.name),expression:\"name\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.name)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.name=$event.target.value}}})]),_vm._v(\" \"),_c('li',[_c('span',[_vm._v(\"所属公司\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.companyName),expression:\"companyName\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.companyName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.companyName=$event.target.value}}})]),_vm._v(\" \"),_c('li',[_c('span',[_vm._v(\"联系电话\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.mobile),expression:\"mobile\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.mobile)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.mobile=$event.target.value}}})]),_vm._v(\" \"),_c('li',[_c('span',[_vm._v(\"API权限\")]),_vm._v(\" \"),_c('i',{staticClass:\"permission-specification\"},[_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.data2,\"show-checkbox\":\"\",\"node-key\":\"id\",\"default-expanded-keys\":[1,2, 3,4],\"default-checked-keys\":_vm.selectedPermission,\"props\":_vm.defaultProps}})],1)]),_vm._v(\" \"),_c('li',[_c('span',[_vm._v(\"账号状态\")]),_vm._v(\" \"),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.value2),callback:function ($$v) {_vm.value2=$$v},expression:\"value2\"}},_vm._l((_vm.accountStatus),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_vm._v(\" \"),_c('li',[_c('span',[_vm._v(\"权限有效期\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.days),expression:\"days\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.days)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.days=$event.target.value}}}),_vm._v(\" \"),_c('i',[_vm._v(\"天\")])]),_vm._v(\" \"),_c('li',[_c('span',[_vm._v(\"备注信息\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.remake),expression:\"remake\"}],attrs:{\"type\":\"text\"},domProps:{\"value\":(_vm.remake)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.remake=$event.target.value}}})])])]),_vm._v(\" \"),_c('div',{staticClass:\"btns\"},[(this.$route.params.key == 'add')?_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.addUser()}}},[_vm._v(\"确定\")]):_vm._e(),_vm._v(\" \"),(this.$route.params.key == 'modify')?_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){return _vm.modifyUser()}}},[_vm._v(\"确定\")]):_vm._e(),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"info\",\"plain\":\"\"},on:{\"click\":function($event){return _vm.goBack()}}},[_vm._v(\"取消\")])],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-40390aa3\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/addApiUser/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-40390aa3\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-40390aa3\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-40390aa3\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/addApiUser/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}