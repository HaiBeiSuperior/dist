webpackJsonp([11],{"Gf+T":function(e,t){},NZsg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=a("bOdI"),o=a.n(s),i=a("mtWM"),l=a.n(i),r=a("HJfm"),u={data:function(){return{username:"",name:"",companyName:"",roleId:"",role:"",status1:"",status:"",mobile:"",startDate:"",endDate:"",createDateTime:"",roleTime:"",pageSize:10,total:0,pageNum:1,currentPage:1,value:"",value6:"",rolesList:[],userRoles:"",accountStatus:[{value:"0",label:"使用中"},{value:"-1",label:"已停用"},{value:"1",label:"禁止媒体下载文件"}],roleValue:"",value1:"",options:[],tableData:[],centerDialogVisible:!1,selectRow:[],roleName:"",getDays:0,userIds:"",authorization:"",token:""}},mounted:function(){this.getUserRoles()},created:function(){var e=window.localStorage;this.authorization=e.getItem("userId"),this.token=e.getItem("token"),this.getUserData(1)},methods:(n={selectValue:function(e){var t;t=this.rolesList.find(function(t){return t.id===e}),this.roleName=t.roleName},confirm:function(){for(var e=this,t=0;t<this.selectRow.length;t++)this.userIds+="userIds="+this.selectRow[t].id+"&";this.userIds=this.userIds.substring(0,this.userIds.lastIndexOf("&")),l()({url:r.b+"/userPermission/updateUsersPermission?roleId="+this.roleValue+"&"+this.userIds+"&days="+this.getDays,method:"get",headers:{Authorization:"user-"+this.authorization+"-"+this.token}}).then(function(t){e.$message({type:"success",message:"更新"+t.data.code+"条！"}),e.getUserData(1)}).catch(function(e){console.log(e)}),this.centerDialogVisible=!1,this.selectRow=[],this.roleValue="",this.getDays="",this.userIds=""},delCheckedUser:function(e){this.selectRow.splice(e,1)},handleSelectionChange:function(e){this.multipleSelection=e},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()}},o()(n,"handleSelectionChange",function(e){this.selectRow=e}),o()(n,"handleClick",function(e){this.$router.push({name:"addAccountNumber",params:{row:e,key:"modify"}})}),o()(n,"handleClickSee",function(e){this.$router.push({name:"addAccountNumber",params:{row:e,key:"look"}})}),o()(n,"handleSizeChange",function(e){console.log("每页 "+e+" 条")}),o()(n,"handleCurrentChange",function(e){this.pageNum=e,this.getUserData(e)}),o()(n,"handleClickDel",function(e,t){var a=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){l()({url:r.b+"/userPermission/deleteWebUsers",method:"get",headers:{Authorization:"user-"+a.authorization+"-"+a.token},params:{webUserIds:e.id}}).then(function(e){e.data.msg?a.$router.push({name:"login"}):a.getUserData(1)}).catch(function(e){console.log(e)}),a.$message({type:"success",message:"删除成功!"})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})}),o()(n,"disableOrEnable",function(e){var t=this,a="";"disable"===e?a=-1:"enable"===e?a=0:"disableDown"===e&&(a=1);for(var n=0;n<this.selectRow.length;n++)l()({url:r.b+"/userPermission/updateWebUserStatus",method:"get",headers:{Authorization:"user-"+this.authorization+"-"+this.token},params:{id:this.selectRow[n].id,status:a}}).then(function(e){200==e.status?(t.$message({type:"success",message:"更新"+e.data.code+"条！"}),t.getUserData(1)):500==e.status?t.$alert(e.message,"提示",{confirmButtonText:"确定",type:"warning"}):t.$message.error("修改失败，请稍后再试！")}).catch(function(e){console.log(e)})}),o()(n,"getUserRoles",function(){var e=this;l()({url:r.b+"/userPermission/findRoles",method:"get",headers:{Authorization:"user-"+this.authorization+"-"+this.token},params:{roleName:"",pageSize:1e3,pageNum:0}}).then(function(t){if(t.data.msg)e.$router.push({name:"login"});else{e.userRolesTemp=t.data.list;for(var a=0;a<e.userRolesTemp.length;a++)-2!=e.userRolesTemp[a].state&&e.rolesList.push(e.userRolesTemp[a])}}).catch(function(e){console.log(e)})}),o()(n,"handelReset",function(){this.username="",this.name="",this.status="",this.roleId="",this.mobile="",this.companyName="",this.startDate="",this.endDate="",this.status1="",this.role="",this.getUserData(1)}),o()(n,"initializationPassword",function(){for(var e=this,t=function(t){l()({url:r.b+"/userPermission/updateWebUserPassword",method:"get",headers:{Authorization:"user-"+e.authorization+"-"+e.token},params:{id:e.selectRow[t].id,password:123456}}).then(function(a){a.data.msg?e.$router.push({name:"login"}):e.selectRow.length-1==t&&e.$message({message:"更新"+a.data.code+"条！",type:"success"})}).catch(function(e){console.log(e)})},a=0;a<this.selectRow.length;a++)t(a)}),o()(n,"getUserData",function(e){var t=this;l()({url:r.b+"/userPermission/findWebUsers",method:"get",headers:{Authorization:"user-"+this.authorization+"-"+this.token},params:{pageSize:this.pageSize,pageNum:e-1,username:this.username,name:this.name,status:this.status,roleId:this.roleId,mobile:this.mobile,companyName:this.companyName,startDate:c(this.startDate),endDate:c(this.endDate)}}).then(function(e){if(e.data.msg)t.$router.push({name:"login"});else{t.tableData=e.data.list,t.total=e.data.count;for(var a=0;a<t.tableData.length;a++)t.tableData[a].createDateTime=t.tableData[a].createDateTime.substring(0,10),t.tableData[a].roleTime=t.tableData[a].roleTime.substring(0,10),0==t.tableData[a].status?t.tableData[a].status="使用中":-1==t.tableData[a].status?t.tableData[a].status="已停用":1==t.tableData[a].status&&(t.tableData[a].status="禁止媒体下载文件")}}).catch(function(e){console.log(e)})}),o()(n,"removeAaary",function(e,t){for(var a=e.length,n=0;n<a;n++)if(e[n]==t)return 0==n?(e.shift(),e):n==a-1?(e.pop(),e):(e.splice(n,1),e)}),n),watch:{$route:function(e,t){console.log("to",e),console.log("from",t)}}};function c(e){if(""!=e){var t=new Date(e),a=(t.getMonth()+1).toString().padStart(2,"0"),n=t.getDate().toString().padStart(2,"0");return(t.getFullYear()+"-"+a+"-"+n).substring(0,10)}}var d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"user-box"},[a("div",[a("div",{staticClass:"options"},[a("div",[e._v("用户名"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}})]),e._v(" "),a("div",[e._v("用户姓名"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}})]),e._v(" "),a("div",[e._v("公司名称"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.companyName,expression:"companyName"}],attrs:{type:"text"},domProps:{value:e.companyName},on:{input:function(t){t.target.composing||(e.companyName=t.target.value)}}})]),e._v(" "),a("div",[e._v("角色\n            "),[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.roleId,callback:function(t){e.roleId=t},expression:"roleId"}},e._l(e.rolesList,function(e){return a("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})}),1)]],2),e._v(" "),a("div",[e._v("注册时间\n            "),a("el-date-picker",{attrs:{type:"date",placeholder:"开始日期"},model:{value:e.startDate,callback:function(t){e.startDate=t},expression:"startDate"}}),e._v("\n            ——\n            "),a("el-date-picker",{attrs:{type:"date",placeholder:"结束日期"},model:{value:e.endDate,callback:function(t){e.endDate=t},expression:"endDate"}})],1),e._v(" "),a("div",{staticStyle:{"margin-right":"20px","margin-left":"20px"}},[e._v("\n            账号状态\n            "),[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.status,callback:function(t){e.status=t},expression:"status"}},e._l(e.accountStatus,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)]],2),e._v(" "),a("div",[e._v("\n            联系电话"),a("input",{directives:[{name:"model",rawName:"v-model",value:e.mobile,expression:"mobile"}],attrs:{type:"text"},domProps:{value:e.mobile},on:{input:function(t){t.target.composing||(e.mobile=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"button-box"},[a("span",{staticStyle:{background:"rgb(96,152,226)"},on:{click:function(t){return e.getUserData(1)}}},[e._v("查询")]),e._v(" "),a("span",{staticStyle:{background:"rgb(172,172,172)"},on:{click:function(t){return e.handelReset()}}},[e._v("重置")])])]),e._v(" "),a("div",{staticClass:"state-box"},[a("div",{staticClass:"operation"},[a("span",{on:{click:function(t){return e.disableOrEnable("disable")}}},[e._v("停用")]),e._v(" "),a("span",{on:{click:function(t){return e.disableOrEnable("enable")}}},[e._v("启用")]),e._v(" "),a("span",{on:{click:function(t){return e.disableOrEnable("disableDown")}}},[e._v("禁止文件下载")]),e._v(" "),a("span",{on:{click:function(t){return e.initializationPassword()}}},[e._v("初始化密码")]),e._v(" "),a("span",{on:{click:function(t){e.centerDialogVisible=!0}}},[e._v("批量修改用户角色")])]),e._v(" "),a("div",{staticClass:"add-btn"},[a("router-link",{attrs:{to:{name:"addAccountNumber",params:{key:"add"}},tag:"span"}},[e._v("新增账号")])],1)]),e._v(" "),a("div",{staticClass:"batch-modification-roles"},[a("el-dialog",{attrs:{title:"(批量)修改用户角色",visible:e.centerDialogVisible,width:"40%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("div",[a("span",[e._v("选中用户")]),e._v(" "),0==this.selectRow.length?a("span",{staticStyle:{color:"red"}},[e._v("\n               未选择任何用户\n            ")]):e._l(e.selectRow,function(t,n){return a("span",{key:n,staticClass:"checked-user"},[e._v("\n                "+e._s(t.username)+"\n                "),a("i",{on:{click:function(t){return e.delCheckedUser()}}},[e._v("X")])])})],2),e._v(" "),a("div",[a("span",[e._v("用户角色")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择"},on:{change:e.selectValue},model:{value:e.roleValue,callback:function(t){e.roleValue=t},expression:"roleValue"}},e._l(e.rolesList,function(e){return a("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})}),1)],1),e._v(" "),"普通用户"!==e.roleName?a("div",[a("span",[e._v("角色有效期")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.getDays,expression:"getDays"}],attrs:{type:"text"},domProps:{value:e.getDays},on:{input:function(t){t.target.composing||(e.getDays=t.target.value)}}}),e._v("天\n        ")]):e._e(),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.centerDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirm()}}},[e._v("确 定")])],1)])],1),e._v(" "),a("div",{staticClass:"list-box"},[a("div",[a("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户名",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{label:"用户姓名",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.name?a("span",[e._v(e._s(t.row.name))]):a("span",[e._v("——")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"公司名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.companyName?a("span",[e._v(e._s(t.row.companyName))]):a("span",[e._v("——")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"联系电话"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.mobile?a("span",[e._v(e._s(t.row.mobile))]):a("span",[e._v("——")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"roleName",align:"center",label:"角色"}}),e._v(" "),a("el-table-column",{attrs:{prop:"roleTime",align:"center",label:"角色有效期"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createDateTime",align:"center",label:"注册时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",align:"center",width:"80",label:"账户状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClickSee(t.row)}}},[e._v("查看")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClick(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleClickDel(t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"paging-box"},[a("div"),e._v(" "),a("div",[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)])])])])},staticRenderFns:[]};var m=a("VU/8")(u,d,!1,function(e){a("Gf+T")},"data-v-0978d334",null);t.default=m.exports}});
//# sourceMappingURL=11.d1b813801d6ebf37353c.js.map